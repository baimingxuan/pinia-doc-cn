(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{405:function(t,s,a){"use strict";a.r(s);var e=a(56),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"从-0-x-v1-迁移到-v2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#从-0-x-v1-迁移到-v2"}},[t._v("#")]),t._v(" 从 0.x (v1) 迁移到 v2")]),t._v(" "),a("p",[t._v("从 2.0.0-rc.4 支持版本开始，"),a("code",[t._v("pinia")]),t._v("对"),a("code",[t._v("Vue 2")]),t._v("和"),a("code",[t._v("Vue 3")]),t._v("都支持！这意味着，所有最新的更新都将应用于"),a("code",[t._v("V2")]),t._v("版本，因此"),a("code",[t._v("Vue 2")]),t._v("和"),a("code",[t._v("Vue 3")]),t._v("用户都能从中受益。如果您使用的是"),a("code",[t._v("Vue 3")]),t._v("，这不会为您带来任何改变，因为您已经在使用"),a("code",[t._v("rc")]),t._v("，您可以查看"),a("a",{attrs:{href:"https://github.com/vuejs/pinia/blob/v2/packages/pinia/CHANGELOG.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("CHANGELOG"),a("OutboundLink")],1),t._v("以获取所有更改的详细说明。否则，这篇指南就是为您准备的!")]),t._v(" "),a("h2",{attrs:{id:"弃用的部分"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#弃用的部分"}},[t._v("#")]),t._v(" 弃用的部分")]),t._v(" "),a("p",[t._v("让我们看看需要应用到代码中的所有变更。首先，请确保您已经在运行最新的"),a("code",[t._v("0.x")]),t._v("版本以查看弃用的内容：")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" i "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'pinia@^0.x.x'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# or with yarn")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'pinia@^0.x.x'")]),t._v("\n")])])]),a("p",[t._v("如果您正在使用"),a("code",[t._v("ESLint")]),t._v("，请考虑使用"),a("a",{attrs:{href:"https://github.com/gund/eslint-plugin-deprecation",target:"_blank",rel:"noopener noreferrer"}},[t._v("此插件"),a("OutboundLink")],1),t._v("来找到所有已弃用的内容。否则，您应该相互对比查看它们之间相同的内容。下面是那些已弃用并被移除的"),a("code",[t._v("API")]),t._v("：")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("createStore()")]),t._v("变成"),a("code",[t._v("defineStore()")])]),t._v(" "),a("li",[t._v("订阅中的"),a("code",[t._v("storeName")]),t._v("变成"),a("code",[t._v("storeId")])]),t._v(" "),a("li",[a("code",[t._v("PiniaPlugin")]),t._v("被重命名为"),a("code",[t._v("PiniaVuePlugin")]),t._v("(用于"),a("code",[t._v("Vue 2")]),t._v("的"),a("code",[t._v("Pinia")]),t._v("插件）")]),t._v(" "),a("li",[a("code",[t._v("$subscribe()")]),t._v("不再接受布尔值作为第二个参数，而是通过传递一个对象"),a("code",[t._v("detached: true")]),t._v("代替。")]),t._v(" "),a("li",[a("code",[t._v("Pinia")]),t._v("插件不再直接接收"),a("code",[t._v("store")]),t._v("的"),a("code",[t._v("id")]),t._v("。使用"),a("code",[t._v("store.$id")]),t._v("代替。")])]),t._v(" "),a("h2",{attrs:{id:"重大的变更"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#重大的变更"}},[t._v("#")]),t._v(" 重大的变更")]),t._v(" "),a("p",[t._v("删除这些后，您可以使用以下命令升级到"),a("code",[t._v("v2")]),t._v("版本：")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" i "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'pinia@^2.x.x'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# or with yarn")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'pinia@^2.x.x'")]),t._v("\n")])])]),a("p",[t._v("并开始更新您的代码。")]),t._v(" "),a("h3",{attrs:{id:"store-泛型"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#store-泛型"}},[t._v("#")]),t._v(" Store 泛型")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/vuejs/pinia/blob/v2/packages/pinia/CHANGELOG.md#200-rc0-2021-07-28",target:"_blank",rel:"noopener noreferrer"}},[t._v("2.0.0-rc.0中新增"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("所有该类型的用法已由"),a("code",[t._v("StoreGeneric")]),t._v("替换为"),a("code",[t._v("GenericStore")]),t._v("。这是新的"),a("code",[t._v("store")]),t._v("泛型，它能够接受任何类型的"),a("code",[t._v("store")]),t._v("。如果您使用"),a("code",[t._v("store")]),t._v("类型编写函数而没传递其泛型（如 "),a("code",[t._v("Store<Id, State, Getters, Actions>")]),t._v("），您应该使用"),a("code",[t._v("StoreGeneric")]),t._v("作为没有泛型"),a("code",[t._v("Store")]),t._v("的类型，并创建一个空的"),a("code",[t._v("store")]),t._v("类型。")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("-function takeAnyStore"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("store: Store"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n+function takeAnyStore"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("store: StoreGeneric"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n-function takeAnyStore"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("store: GenericStore"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n+function takeAnyStore"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("store: StoreGeneric"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"专为插件的-definestoreoptions"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#专为插件的-definestoreoptions"}},[t._v("#")]),t._v(" 专为插件的  DefineStoreOptions")]),t._v(" "),a("p",[t._v("如果您正在使用"),a("code",[t._v("TypeScript")]),t._v("编写插件，并扩展"),a("code",[t._v("DefineStoreOptions")]),t._v("类型以添加自定义选项，您应将其重命名为"),a("code",[t._v("DefineStoreOptionsBase")]),t._v("。此类型在"),a("code",[t._v("setup")]),t._v("和"),a("code",[t._v("options stores")]),t._v("都适用。")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("declare")]),t._v(" module "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'pinia'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n-  "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" interface DefineStoreOptions"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("S, Store"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n+  "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" interface DefineStoreOptionsBase"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("S, Store"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n     debounce?: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n       "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("k "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" keyof StoreActions"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Store"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("?: number\n     "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"piniastoreplugin-被重命名"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#piniastoreplugin-被重命名"}},[t._v("#")]),t._v(" PiniaStorePlugin  被重命名")]),t._v(" "),a("p",[t._v("类型"),a("code",[t._v("PiniaStorePlugin")]),t._v("已重命名为"),a("code",[t._v("PiniaPlugin")]),t._v("。")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("-import "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" PiniaStorePlugin "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" from "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'pinia'")]),t._v("\n+import "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" PiniaPlugin "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" from "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'pinia'")]),t._v("\n\n-const piniaPlugin: PiniaStorePlugin "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n+const piniaPlugin: PiniaPlugin "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   // "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("请注意，此变更能生效的前提是，将"),a("code",[t._v("Pinia")]),t._v("升级到最新版本。")]),t._v(" "),a("h2",{attrs:{id:"vue-composition-api-版本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vue-composition-api-版本"}},[t._v("#")]),t._v(" @vue/composition-api 版本")]),t._v(" "),a("p",[t._v("由于"),a("code",[t._v("pinia")]),t._v("依赖于"),a("code",[t._v("effectScope()")]),t._v("，因此您使用"),a("code",[t._v("@vue/composition-api")]),t._v("的版本至少为 "),a("code",[t._v("1.1.0")]),t._v("：")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" i @vue/composition-api@latest\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# or with yarn")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" @vue/composition-api@latest\n")])])]),a("h2",{attrs:{id:"webpack-4-支持"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#webpack-4-支持"}},[t._v("#")]),t._v(" webpack 4 支持")]),t._v(" "),a("p",[t._v("如果您使用的是"),a("code",[t._v("webpack 4")]),t._v("（"),a("code",[t._v("Vue CLI")]),t._v("使用"),a("code",[t._v("webpack 4")]),t._v("），您可能会遇到如下错误：")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("ERROR  Failed to compile with "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),t._v(" errors\n\n error  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" ./node_modules/pinia/dist/pinia.mjs\n\nCan"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'t import the named export '")]),t._v("computed' from non EcmaScript module "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("only default "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" is available"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("这是由于"),a("code",[t._v("dist")]),t._v("文件的现代化以支持"),a("code",[t._v("Node.js")]),t._v("中的原生"),a("code",[t._v("ESM")]),t._v("模块。文件使用"),a("code",[t._v(".mjs")]),t._v("和"),a("code",[t._v(".cjs")]),t._v("扩展名来让"),a("code",[t._v("Node")]),t._v("从中受益。要解决此问题，您有两种可能：")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("如果您使用的是"),a("code",[t._v("Vue CLI 4.x")]),t._v("，请升级您的依赖项。这应该包括下面的修复。")])]),t._v(" "),a("li",[a("ul",[a("li",[t._v("如果您无法升级，请将其添加到您的"),a("code",[t._v("vue.config.js")]),t._v("：")])])])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// vue.config.js")]),t._v("\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("configureWebpack")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("module")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("rules")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("test")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token regex"}},[a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("\\.mjs$")]),a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("include")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token regex"}},[a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("node_modules")]),a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'javascript/auto'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("ul",[a("li",[t._v("如果您手动处理"),a("code",[t._v("webpack")]),t._v("，您必须让它知道如何处理"),a("code",[t._v(".mjs")]),t._v("文件：")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// webpack.config.js")]),t._v("\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("module")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("rules")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("test")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token regex"}},[a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("\\.mjs$")]),a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("include")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token regex"}},[a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("node_modules")]),a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'javascript/auto'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"开发工具"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开发工具"}},[t._v("#")]),t._v(" 开发工具")]),t._v(" "),a("p",[a("code",[t._v("Pinia v2")]),t._v("不再支持"),a("code",[t._v("Vue Devtools v5")]),t._v("，它需要"),a("code",[t._v("Vue Devtools v6")]),t._v("。"),a("a",{attrs:{href:"https://devtools.vuejs.org/guide/installation.html#chrome",target:"_blank",rel:"noopener noreferrer"}},[t._v("在Vue Devtools 文档"),a("OutboundLink")],1),t._v("中找到该扩展"),a("code",[t._v("beta")]),t._v("通道的下载链接。")]),t._v(" "),a("h2",{attrs:{id:"nuxt"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nuxt"}},[t._v("#")]),t._v(" Nuxt")]),t._v(" "),a("p",[t._v("如果您使用"),a("code",[t._v("Nuxt")]),t._v("，"),a("code",[t._v("pinia")]),t._v("现在有它的专有"),a("code",[t._v("Nuxt")]),t._v("包🎉。安装它：")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" i @pinia/nuxt\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# or with yarn")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" @pinia/nuxt\n")])])]),a("p",[t._v("还要确保更新您的**"),a("code",[t._v("@nuxtjs/composition-api")]),t._v("**包。")]),t._v(" "),a("p",[t._v("如果您使用的是"),a("code",[t._v("TypeScript")]),t._v("，请调整您"),a("code",[t._v("nuxt.config.js")]),t._v("和"),a("code",[t._v("tsconfig.json")]),t._v("的配置：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// nuxt.config.js")]),t._v("\n module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("buildModules")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n     "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@nuxtjs/composition-api/module'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'pinia/nuxt'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@pinia/nuxt'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// tsconfig.json")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"types"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n     "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n-    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"pinia/nuxt/types"')]),t._v("\n+    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@pinia/nuxt"')]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("还建议您阅读"),a("a",{attrs:{href:"https://baimingxuan.net/pinia-doc-cn/ssr/nuxt.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Nuxt专用章节"),a("OutboundLink")],1),t._v("。")])])}),[],!1,null,null,null);s.default=n.exports}}]);